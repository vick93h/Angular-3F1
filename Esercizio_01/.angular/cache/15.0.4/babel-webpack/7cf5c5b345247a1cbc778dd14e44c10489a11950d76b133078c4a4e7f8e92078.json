{"ast":null,"code":"module.exports = realpath;\nrealpath.realpath = realpath;\nrealpath.sync = realpathSync;\nrealpath.realpathSync = realpathSync;\nrealpath.monkeypatch = monkeypatch;\nrealpath.unmonkeypatch = unmonkeypatch;\nvar fs = require('fs');\nvar origRealpath = fs.realpath;\nvar origRealpathSync = fs.realpathSync;\nvar version = process.version;\nvar ok = /^v[0-5]\\./.test(version);\nvar old = require('./old.js');\nfunction newError(er) {\n  return er && er.syscall === 'realpath' && (er.code === 'ELOOP' || er.code === 'ENOMEM' || er.code === 'ENAMETOOLONG');\n}\nfunction realpath(p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb);\n  }\n  if (typeof cache === 'function') {\n    cb = cache;\n    cache = null;\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb);\n    } else {\n      cb(er, result);\n    }\n  });\n}\nfunction realpathSync(p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache);\n  }\n  try {\n    return origRealpathSync(p, cache);\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache);\n    } else {\n      throw er;\n    }\n  }\n}\nfunction monkeypatch() {\n  fs.realpath = realpath;\n  fs.realpathSync = realpathSync;\n}\nfunction unmonkeypatch() {\n  fs.realpath = origRealpath;\n  fs.realpathSync = origRealpathSync;\n}","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}